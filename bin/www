#!/usr/bin/env node

// @todo add json config -c --config
// @todo models import to db

var program = require('commander');
var ModelExport = require('../').ModelExport;
var modelExport;

program
  .version('0.0.1')
  .usage('Create models by database')
  // .command('exec')
  // .alias('ex')
  .option('-h, --host <n>', 'Host IP default: 127.0.0.1')
  .option('-u, --user <n>', 'Host User default: root')
  .option('-p, --password <n>', 'Host password. default: ""')
  .option('-d, --database <n>', 'Database name')
  .option('-o, --output <dir>', 'Select models dir')
  .option('-m, --dialect <n>', 'DB type')
  .option('-P, --port <n>', 'DB Port. default: 3306')
  .option('-c, --config <file>', 'Config file')
  .option('-e, --compile <type>', 'Model file type')
  .option('-s, --space <n>', 'You can select 2 space or 4 space', parseInt)
  .parse(process.argv);
/*  .action(function (env, program){
    console.log(env, program)
    modelExport = new ModelExport({
      host: program.host || '127.0.0.1',
      dialect: program.dialect || 'mysql',
      port: program.port || 3306,
      database: program.database,
      user: program.user || 'root',
      password: program.password || '',
      dir: program.output || './models',
      outputFileType: program.compile || 'coffee'
    })

    modelExport.createModels()
  })  */

  modelExport = new ModelExport({
    host: program.host || '127.0.0.1',
    dialect: program.dialect || 'mysql',
    port: program.port || 3306,
    database: program.database,
    user: program.user || 'root',
    password: program.password || '',
    dir: program.output || './models',
    outputFileType: program.compile || 'coffee',
    space: program.space || 2
  })

  modelExport.createModels()
